(function () {
  function Chart(ctx, config) {
    this.ctx = ctx;
    this.config = config;
    this.update = function (labels, data) {
      this.config.data.labels = labels;
      this.config.data.datasets[0].data = data;
      this.draw();
    };
    this.draw = function () {
      var canvas = ctx.canvas;
      var width = canvas.width;
      var height = canvas.height;
      ctx.clearRect(0, 0, width, height);
      var labels = this.config.data.labels || [];
      var data = this.config.data.datasets[0].data || [];
      var max = Math.max.apply(null, data.concat([1]));
      var padding = 24;
      var chartHeight = height - padding * 2;
      var barWidth = (width - padding * 2) / data.length - 8;
      ctx.fillStyle = "#1c2740";
      ctx.fillRect(0, 0, width, height);
      ctx.fillStyle = this.config.data.datasets[0].backgroundColor || "#ff8a3d";
      data.forEach(function (value, i) {
        var x = padding + i * (barWidth + 8);
        var barHeight = (value / max) * chartHeight;
        ctx.fillRect(x, height - padding - barHeight, barWidth, barHeight);
      });
      ctx.fillStyle = "#9aa3b2";
      ctx.font = "12px sans-serif";
      labels.forEach(function (label, i) {
        var x = padding + i * (barWidth + 8);
        ctx.fillText(label, x, height - 6);
      });
    };
    this.draw();
  }
  window.Chart = Chart;
})();
